(this["webpackJsonpthorswap-app"]=this["webpackJsonpthorswap-app"]||[]).push([[7],{1655:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var a={average:.67,fast:1,fastest:1.5},i=function(t){var e,n=t.inboundData,a=t.chain,i=n.find((function(t){return t.chain===a}));return Number(null!==(e=null===i||void 0===i?void 0:i.gas_rate)&&void 0!==e?e:0)},o=function(t){var e=t.inboundData,n=t.chain,o=t.feeOptionType;return i({inboundData:e,chain:n})*a[o]}},1656:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var a=n(0),i=n(21),o=n(148),r=n(99),s=n(1655),c=function(t){var e=t.inputAsset,n=t.outputAsset,c=Object(o.a)().feeOptionType,u=Object(r.a)(),d=u.inboundData,l=u.pools,p=Object(a.useMemo)((function(){var t=Object(s.b)({inboundData:d,chain:e.chain,feeOptionType:c});return i.NetworkFee.getNetworkFeeByAsset({asset:e,gasRate:t,direction:"inbound"})}),[e,d,c]),b=Object(a.useMemo)((function(){if(!n)return null;var t=Object(s.a)({inboundData:d,chain:n.chain});return i.NetworkFee.getNetworkFeeByAsset({asset:n,gasRate:t,direction:"outbound"})}),[n,d]),f=Object(a.useMemo)((function(){if(!b)return p;var t=new i.AssetAmount(e,i.Amount.fromAssetAmount(b.totalPriceIn(e,l).price,e.decimal));return p.asset.eq(e)?p.add(t):new i.AssetAmount(e,i.Amount.fromAssetAmount(p.totalPriceIn(e,l).price,e.decimal)).add(t)}),[e,p,b,l]),m=Object(a.useMemo)((function(){return f.totalPriceIn(i.Asset.USD(),l)}),[f,l]);return{totalFee:f,inboundFee:p,outboundFee:b,totalFeeInUSD:m}},u=function(t,e,n){var a=null===t||void 0===t?void 0:t.totalPriceIn(i.Asset.USD(),n),o=null===e||void 0===e?void 0:e.totalPriceIn(i.Asset.USD(),n);if(null===t&&o)return o.toCurrencyFormat();if(null===e&&a)return a.toCurrencyFormat();if(a&&o){var r=a.raw().plus(o.raw());return i.Amount.fromAssetAmount(r,8).toFixed(2)}return i.Amount.fromAssetAmount(0,8).toFixed()}},1657:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var a,i=n(0),o=new Uint8Array(16);function r(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"===typeof t&&s.test(t)},u=[],d=0;d<256;++d)u.push((d+256).toString(16).substr(1));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};var p=function(t,e,n){var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=a[i];return e}return l(a)},b=n(99),f=n(35),m=function(){var t=Object(b.a)(),e=t.addNewTxTracker,n=t.updateTxTracker,a=t.clearTxTrackers,o=t.processSubmittedTx;return{submitTransaction:Object(i.useCallback)((function(t){var n=t.type,a=t.submitTx,i=p();return e({uuid:i,type:n,status:f.b.Submitting,submitTx:a,action:null,refunded:null}),i}),[e]),pollTransaction:Object(i.useCallback)((function(t){var e=t.uuid,a=t.submitTx,i=t.type;n({uuid:e,txTracker:{status:f.b.Pending,submitTx:a}}),o({submitTx:a,type:i})}),[n,o]),clearTxTrackers:a,setTxFailed:Object(i.useCallback)((function(t){n({uuid:t,txTracker:{status:f.b.Failed}})}),[n])}}},1667:function(t,e,n){"use strict";n.r(e);var a,i=n(2),o=n.n(i),r=n(16),s=n(26),c=n(0),u=n(287),d=n(21),l=n(35),p=n(157),b=n(1656),f=n(1657),m=n(58),j=n(370),g=n(47),O=n(9),x=n(5),h=n(6),y=n(44),v=Object(x.d)(u.Panel).withConfig({displayName:"Upgradestyle__Container",componentId:"ijqa3i-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;background:",";margin-left:auto;margin-right:auto;padding-top:0px;border-radius:14px;border:1px solid ",";"],Object(h.palette)("background",0),Object(h.palette)("gray",0)),A=x.d.div.withConfig({displayName:"Upgradestyle__ContentPanel",componentId:"ijqa3i-1"})(["display:flex;flex-direction:column;width:100%;padding:16px 8px 8px 8px;",""],y.a.sm(a||(a=Object(O.a)(["\n    padding: 16px 12px 4px 12px;\n  "])))),C=(x.d.div.withConfig({displayName:"Upgradestyle__PoolSelect",componentId:"ijqa3i-2"})(["display:flex;justify-content:space-between;align-items:center;padding:8px 16px;"]),x.d.div.withConfig({displayName:"Upgradestyle__FormItem",componentId:"ijqa3i-3"})(["display:flex;flex-direction:column;margin:8px 0;"])),w=(Object(x.d)(u.Label).attrs({weight:"bold"}).withConfig({displayName:"Upgradestyle__FormLabel",componentId:"ijqa3i-4"})(["margin-bottom:8px;"]),x.d.div.withConfig({displayName:"Upgradestyle__ConfirmModalContent",componentId:"ijqa3i-5"})(["display:flex;flex-direction:column;padding:10px;"])),T=(x.d.div.withConfig({displayName:"Upgradestyle__MemoTypes",componentId:"ijqa3i-6"})(["display:flex;align-items:center;justify-content:space-between;width:130px;"]),x.d.div.withConfig({displayName:"Upgradestyle__ConfirmButtonContainer",componentId:"ijqa3i-7"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:0 2%;margin-top:14px;button{flex:1;}"])),k=n(1),S=function(t){var e=t.runeToUpgrade,n=t.wallet,a=Object(f.a)(),i=a.submitTransaction,p=a.pollTransaction,O=a.setTxFailed,x=Object(c.useState)(e[0]),h=Object(s.a)(x,2),y=h[0],S=h[1],U=Object(c.useState)(d.Amount.fromAssetAmount(0,8)),F=Object(s.a)(U,2),I=F[0],N=F[1],R=Object(c.useState)(0),_=Object(s.a)(R,2),D=_[0],M=_[1],P=Object(c.useState)(!1),q=Object(s.a)(P,2),E=q[0],B=q[1],L=Object(c.useState)(""),H=Object(s.a)(L,2),V=H[0],W=H[1],J=m.a.getWalletAddressByChain("THOR")||"",Y=Object(c.useMemo)((function(){return n?Object(d.getAssetBalance)(y,n).amount:d.Amount.fromAssetAmount(0,8)}),[y,n]),$=Object(b.b)({inputAsset:y}).inboundFee;Object(c.useEffect)((function(){var t=m.a.getWalletAddressByChain("THOR");W(t||"")}),[]);var z=Object(c.useCallback)((function(t){S(t)}),[]),G=Object(c.useCallback)((function(t){t.gt(Y)?(N(Y),M(100)):(N(t),M(t.div(Y).mul(100).assetAmount.toNumber()))}),[Y]),K=Object(c.useCallback)((function(t){M(t);var e=Y.mul(t).div(100);N(e)}),[Y]),Q=Object(c.useCallback)((function(){K(100)}),[K]),X=Object(c.useCallback)(Object(r.a)(o.a.mark((function t(){var e,n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(B(!1),!y||!V){t.next=16;break}return e=new d.AssetAmount(y,I),n=i({type:l.c.Switch,submitTx:{inAssets:[{asset:y.toString(),amount:I.toSignificant(6)}],outAssets:[{asset:d.Asset.RUNE().toString(),amount:I.toSignificant(6)}],recipient:V}}),t.prev=4,t.next=7,m.a.upgrade({runeAmount:e,recipient:V});case 7:a=t.sent,p({type:l.c.Switch,uuid:n,submitTx:{inAssets:[{asset:y.toString(),amount:I.toSignificant(6)}],outAssets:[{asset:d.Asset.RUNE().toString(),amount:I.toSignificant(6)}],txID:a,submitDate:new Date,recipient:V}}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(4),O(n),Object(u.Notification)({type:"error",message:"Submit Transaction Failed.",duration:20}),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,11]])}))),[y,I,i,p,V,O]),Z=Object(c.useCallback)((function(){B(!1)}),[]),tt=Object(c.useCallback)((function(){V?m.a.validateAddress({chain:"THOR",address:V})?B(!0):Object(u.Notification)({type:"error",message:"Invalid Recipient Address",description:"Recipient address should be a valid address."}):Object(u.Notification)({type:"info",message:"You have to connect wallet for Thorchain."})}),[V]),et=Object(c.useMemo)((function(){return Object(k.jsxs)(w,{children:[Object(k.jsx)(u.Information,{title:"Upgrade",description:"".concat(y.ticker.toUpperCase()," (").concat(y.type.toUpperCase(),")")}),Object(k.jsx)(u.Information,{title:"Transaction Fee",description:$.toCurrencyFormat(),tooltip:g.p}),Object(k.jsx)("br",{}),Object(k.jsx)(u.Information,{title:"Recipient Address",description:Object(j.b)(V)})]})}),[$,y,V]),nt=Object(c.useMemo)((function(){return"Upgrade ".concat(y.chain," RUNE")}),[y]);return Object(k.jsxs)(v,{children:[Object(k.jsx)(u.Helmet,{title:nt,content:nt}),Object(k.jsx)(u.ContentTitle,{children:nt}),Object(k.jsxs)(A,{children:[Object(k.jsx)(u.AssetInputCard,{title:"upgrade",asset:y,assets:e,selectDisabled:2!==e.length,amount:I,balance:Y,onChange:G,onSelect:z,onMax:Q,wallet:n||void 0}),Object(k.jsx)(u.Slider,{value:D,onChange:K,withLabel:!0}),Object(k.jsx)(C,{children:Object(k.jsx)(u.Information,{title:"Transaction Fee",description:$.toCurrencyFormat(),tooltip:g.p})}),Object(k.jsx)(u.AddressSelectCard,{title:"Recipient Address",address:V,chain:"THOR",chainAddr:J,onAddressChange:W}),Object(k.jsx)(T,{children:Object(k.jsx)(u.FancyButton,{onClick:tt,error:!1,children:"Upgrade"})})]}),Object(k.jsx)(u.ConfirmModal,{visible:E,onOk:X,onCancel:Z,inputAssets:[y],children:et})]})},U=function(){var t=Object(p.a)().wallet,e=Object(c.useMemo)((function(){return Object(d.getRuneToUpgrade)(t)}),[t]),n=Object(c.useMemo)((function(){return e&&Object(d.hasWalletConnected)({wallet:t,inputAssets:e})}),[t,e]);return t&&n?e&&0!==e.length?Object(k.jsx)(S,{runeToUpgrade:e,wallet:t}):Object(k.jsx)(v,{children:Object(k.jsx)(u.Label,{children:"You don't have BEP2 or ERC20 RUNE to upgrade."})}):Object(k.jsx)(v,{children:Object(k.jsx)(u.Label,{children:"Please connect a wallet."})})};e.default=U}}]);
//# sourceMappingURL=7.ffc6be9f.chunk.js.map