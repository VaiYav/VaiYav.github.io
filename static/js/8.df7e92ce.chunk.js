(this["webpackJsonpthorswap-app"]=this["webpackJsonpthorswap-app"]||[]).push([[8],{1655:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i={average:.67,fast:1,fastest:1.5},o=function(t){var e,n=t.inboundData,i=t.chain,o=n.find((function(t){return t.chain===i}));return Number(null!==(e=null===o||void 0===o?void 0:o.gas_rate)&&void 0!==e?e:0)},a=function(t){var e=t.inboundData,n=t.chain,a=t.feeOptionType;return o({inboundData:e,chain:n})*i[a]}},1656:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var i=n(0),o=n(21),a=n(148),s=n(99),r=n(1655),c=function(t){var e=t.inputAsset,n=t.outputAsset,c=Object(a.a)().feeOptionType,u=Object(s.a)(),d=u.inboundData,l=u.pools,p=Object(i.useMemo)((function(){var t=Object(r.b)({inboundData:d,chain:e.chain,feeOptionType:c});return o.NetworkFee.getNetworkFeeByAsset({asset:e,gasRate:t,direction:"inbound"})}),[e,d,c]),f=Object(i.useMemo)((function(){if(!n)return null;var t=Object(r.a)({inboundData:d,chain:n.chain});return o.NetworkFee.getNetworkFeeByAsset({asset:n,gasRate:t,direction:"outbound"})}),[n,d]),b=Object(i.useMemo)((function(){if(!f)return p;var t=new o.AssetAmount(e,o.Amount.fromAssetAmount(f.totalPriceIn(e,l).price,e.decimal));return p.asset.eq(e)?p.add(t):new o.AssetAmount(e,o.Amount.fromAssetAmount(p.totalPriceIn(e,l).price,e.decimal)).add(t)}),[e,p,f,l]),m=Object(i.useMemo)((function(){return b.totalPriceIn(o.Asset.USD(),l)}),[b,l]);return{totalFee:b,inboundFee:p,outboundFee:f,totalFeeInUSD:m}},u=function(t,e,n){var i=null===t||void 0===t?void 0:t.totalPriceIn(o.Asset.USD(),n),a=null===e||void 0===e?void 0:e.totalPriceIn(o.Asset.USD(),n);if(null===t&&a)return a.toCurrencyFormat();if(null===e&&i)return i.toCurrencyFormat();if(i&&a){var s=i.raw().plus(a.raw());return o.Amount.fromAssetAmount(s,8).toFixed(2)}return o.Amount.fromAssetAmount(0,8).toFixed()}},1657:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i,o=n(0),a=new Uint8Array(16);function s(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(a)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"===typeof t&&r.test(t)},u=[],d=0;d<256;++d)u.push((d+256).toString(16).substr(1));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n};var p=function(t,e,n){var i=(t=t||{}).random||(t.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return l(i)},f=n(99),b=n(35),m=function(){var t=Object(f.a)(),e=t.addNewTxTracker,n=t.updateTxTracker,i=t.clearTxTrackers,a=t.processSubmittedTx;return{submitTransaction:Object(o.useCallback)((function(t){var n=t.type,i=t.submitTx,o=p();return e({uuid:o,type:n,status:b.b.Submitting,submitTx:i,action:null,refunded:null}),o}),[e]),pollTransaction:Object(o.useCallback)((function(t){var e=t.uuid,i=t.submitTx,o=t.type;n({uuid:e,txTracker:{status:b.b.Pending,submitTx:i}}),a({submitTx:i,type:o})}),[n,a]),clearTxTrackers:i,setTxFailed:Object(o.useCallback)((function(t){n({uuid:t,txTracker:{status:b.b.Failed}})}),[n])}}},1673:function(t,e,n){"use strict";n.r(e);var i=n(2),o=n.n(i),a=n(16),s=n(26),r=n(0),c=n(82),u=n(497),d=n(287),l=n(21),p=n(99),f=n(35),b=n(157),m=n(1656),y=n(1657),h=n(58),A=n(601),j=n(5),w=n(6),O=j.d.div.withConfig({displayName:"Withdrawstyle__WithdrawHeader",componentId:"hf3fns-0"})(["display:flex;flex-direction:column;"]),x=j.d.div.withConfig({displayName:"Withdrawstyle__WithdrawHeaderRow",componentId:"hf3fns-1"})(["display:flex;align-items:center;"]),S=Object(j.d)(d.Label).attrs({color:"primary",weight:"bold"}).withConfig({displayName:"Withdrawstyle__HeaderLabel",componentId:"hf3fns-2"})(["width:80px;margin-bottom:8px;"]),T=(j.d.div.withConfig({displayName:"Withdrawstyle__LPTypes",componentId:"hf3fns-3"})(["display:flex;align-items:center;"]),j.d.div.withConfig({displayName:"Withdrawstyle__ToolContainer",componentId:"hf3fns-4"})(["display:flex;height:60px;"])),g=j.d.div.withConfig({displayName:"Withdrawstyle__SliderWrapper",componentId:"hf3fns-5"})(["flex:1;"]),v=(j.d.div.withConfig({displayName:"Withdrawstyle__SwitchPair",componentId:"hf3fns-6"})(["display:flex;justify-content:center;align-items:center;flex:1;svg{width:24px;height:24px;color:",";transform:rotate(90deg);}"],Object(w.palette)("primary",0)),j.d.div.withConfig({displayName:"Withdrawstyle__ConfirmButtonContainer",componentId:"hf3fns-7"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:0 2%;margin-top:14px;button{flex:1;}"])),M=j.d.div.withConfig({displayName:"Withdrawstyle__ConfirmModalContent",componentId:"hf3fns-8"})(["display:flex;flex-direction:column;padding:10px;"]),C=j.d.div.withConfig({displayName:"Withdrawstyle__DetailContent",componentId:"hf3fns-9"})(["display:flex;flex-direction:column;width:100%;padding:8px;margin-top:14px;border:1px solid ",";"],Object(w.palette)("gray",0)),E=(Object(j.d)(d.FancyButton).withConfig({displayName:"Withdrawstyle__ApproveBtn",componentId:"hf3fns-10"})(["margin-right:8px;"]),n(1)),N=function(t){var e=t.poolMemberData,n=t.pool,i=t.pools,c=t.shareTypes,p=Object(r.useState)(c[0]),j=Object(s.a)(p,2),w=j[0],N=j[1],k=Object(b.a)().wallet,R=Object(y.a)(),U=R.submitTransaction,_=R.pollTransaction,I=R.setTxFailed,L=Object(r.useMemo)((function(){return n.asset}),[n]),W=Object(r.useMemo)((function(){return w===f.a.RUNE_ASYM?d.LiquidityTypeOption.RUNE:w===f.a.ASSET_ASYM?d.LiquidityTypeOption.ASSET:d.LiquidityTypeOption.SYMMETRICAL}),[w]),F=Object(r.useState)(W),P=Object(s.a)(F,2),Y=P[0],q=P[1],D=Object(r.useState)(0),B=Object(s.a)(D,2),V=B[0],H=B[1],J=Object(r.useState)(!1),G=Object(s.a)(J,2),$=G[0],z=G[1],K=Object(m.b)({inputAsset:L}).inboundFee,Q=Object(m.b)({inputAsset:l.Asset.RUNE()}).inboundFee,X=Object(r.useMemo)((function(){return Y===d.LiquidityTypeOption.ASSET?L:l.Asset.RUNE()}),[Y,L]),Z=Object(r.useMemo)((function(){return Y===d.LiquidityTypeOption.ASSET?"".concat(K.toCurrencyFormat()," (").concat(K.totalPriceIn(l.Asset.USD(),i).toCurrencyFormat(2),")"):"".concat(Q.toCurrencyFormat()," (").concat(Q.totalPriceIn(l.Asset.USD(),i).toCurrencyFormat(2),")")}),[K,Q,i,Y]),tt=Object(r.useMemo)((function(){return w===f.a.RUNE_ASYM?e.runeAsym:w===f.a.ASSET_ASYM?e.assetAsym:w===f.a.SYM?e.sym:null}),[e,w]),et=Object(r.useMemo)((function(){if(!tt)return null;var t=tt.liquidityUnits;return new l.Liquidity(n,l.Amount.fromMidgard(t))}),[n,tt]),nt=Object(r.useMemo)((function(){if(!et)return{runeAmount:l.Amount.fromMidgard(0),assetAmount:l.Amount.fromMidgard(0)};if(Y===d.LiquidityTypeOption.SYMMETRICAL)return et.getSymWithdrawAmount(new l.Percent(V,l.AmountType.BASE_AMOUNT));if(Y===d.LiquidityTypeOption.RUNE)return{runeAmount:et.getAsymRuneWithdrawAmount(new l.Percent(V,l.AmountType.BASE_AMOUNT)),assetAmount:l.Amount.fromMidgard(0)};var t=et.getAsymAssetWithdrawAmount(new l.Percent(V,l.AmountType.BASE_AMOUNT));return{runeAmount:l.Amount.fromMidgard(0),assetAmount:t}}),[Y,V,et]),it=nt.runeAmount,ot=nt.assetAmount,at=Object(r.useMemo)((function(){return new l.Price({baseAsset:l.Asset.RUNE(),pools:i,priceAmount:it})}),[it,i]),st=Object(r.useMemo)((function(){return new l.Price({baseAsset:n.asset,pools:i,priceAmount:ot})}),[n,ot,i]),rt=Object(r.useCallback)((function(t){N(t),t===f.a.RUNE_ASYM?q(d.LiquidityTypeOption.RUNE):t===f.a.ASSET_ASYM?q(d.LiquidityTypeOption.ASSET):q(d.LiquidityTypeOption.SYMMETRICAL)}),[]),ct=Object(r.useCallback)((function(t){H(t)}),[]),ut=Object(r.useCallback)(Object(a.a)(o.a.mark((function t(){var e,i,a,s,r,c,p,b,m,y,A,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z(!1),!k){t.next=56;break}if(e=n.asset.toString(),i="",t.prev=4,w!==f.a.SYM){t.next=33;break}if(Y!==d.LiquidityTypeOption.SYMMETRICAL){t.next=15;break}return a=[{asset:l.Asset.RUNE().toString(),amount:it.toSignificant(6)},{asset:n.asset.toString(),amount:ot.toSignificant(6)}],i=U({type:f.c.Withdraw,submitTx:{inAssets:[],outAssets:a,poolAsset:e}}),t.next=11,h.a.withdraw({pool:n,percent:new l.Percent(V),from:"sym",to:"sym"});case 11:s=t.sent,_({type:f.c.Withdraw,uuid:i,submitTx:{inAssets:[],outAssets:a,poolAsset:e,txID:s,withdrawChain:u.b}}),t.next=31;break;case 15:if(Y!==d.LiquidityTypeOption.RUNE){t.next=24;break}return r=[{asset:l.Asset.RUNE().toString(),amount:it.toSignificant(6)}],i=U({type:f.c.Withdraw,submitTx:{inAssets:[],outAssets:r,poolAsset:e}}),t.next=20,h.a.withdraw({pool:n,percent:new l.Percent(V),from:"sym",to:"rune"});case 20:c=t.sent,_({type:f.c.Withdraw,uuid:i,submitTx:{inAssets:[],outAssets:r,txID:c,poolAsset:e,withdrawChain:u.b}}),t.next=31;break;case 24:if(Y!==d.LiquidityTypeOption.ASSET){t.next=31;break}return p=[{asset:n.asset.toString(),amount:ot.toSignificant(6)}],i=U({type:f.c.Withdraw,submitTx:{inAssets:[],outAssets:p,poolAsset:e}}),t.next=29,h.a.withdraw({pool:n,percent:new l.Percent(V),from:"sym",to:"asset"});case 29:b=t.sent,_({type:f.c.Withdraw,uuid:i,submitTx:{inAssets:[],outAssets:p,txID:b,poolAsset:e,withdrawChain:u.b}});case 31:t.next=49;break;case 33:if(w!==f.a.ASSET_ASYM){t.next=42;break}return m=[{asset:n.asset.toString(),amount:ot.toSignificant(6)}],i=U({type:f.c.Withdraw,submitTx:{inAssets:[],outAssets:m,poolAsset:e}}),t.next=38,h.a.withdraw({pool:n,percent:new l.Percent(V),from:"asset",to:"asset"});case 38:y=t.sent,_({type:f.c.Withdraw,uuid:i,submitTx:{inAssets:[],outAssets:m,txID:y,poolAsset:e,withdrawChain:n.asset.chain}}),t.next=49;break;case 42:if(w!==f.a.RUNE_ASYM){t.next=49;break}return A=[{asset:l.Asset.RUNE().toString(),amount:it.toSignificant(6)}],i=U({type:f.c.Withdraw,submitTx:{inAssets:[],outAssets:A,poolAsset:e}}),t.next=47,h.a.withdraw({pool:n,percent:new l.Percent(V),from:"rune",to:"rune"});case 47:j=t.sent,_({type:f.c.Withdraw,uuid:i,submitTx:{inAssets:[],outAssets:A,txID:j,poolAsset:e,withdrawChain:u.b}});case 49:t.next=56;break;case 51:t.prev=51,t.t0=t.catch(4),console.log(t.t0),I(i),Object(d.Notification)({type:"error",message:"Submit Transaction Failed.",description:null===t.t0||void 0===t.t0?void 0:t.t0.toString(),duration:20});case 56:case"end":return t.stop()}}),t,null,[[4,51]])}))),[Y,w,k,n,V,it,ot,U,_,I]),dt=Object(r.useCallback)((function(){z(!1)}),[]),lt=Object(r.useCallback)((function(){k?z(!0):Object(d.Notification)({type:"info",message:"Wallet Not Found",description:"Please connect wallet"})}),[k]),pt=Object(r.useMemo)((function(){return Object(E.jsxs)(M,{children:[w===f.a.SYM&&Object(E.jsx)(d.Information,{title:"Withdraw",description:"".concat(ot.toSignificant(6)," ").concat(L.ticker.toUpperCase(),", ").concat(it.toSignificant(6)," RUNE")}),w===f.a.ASSET_ASYM&&Object(E.jsx)(d.Information,{title:"Withdraw",description:"".concat(ot.toSignificant(6)," ").concat(L.ticker.toUpperCase())}),w===f.a.RUNE_ASYM&&Object(E.jsx)(d.Information,{title:"Withdraw",description:"".concat(it.toSignificant(6)," RUNE")}),Object(E.jsx)(d.Information,{title:"Transaction Fee",description:Z,tooltip:"Gas fee used for submitting the transaction using the thorchain protocol"})]})}),[ot,it,L,w,Z]),ft=Object(r.useMemo)((function(){return"Withdraw ".concat(L.ticker," Liquidity")}),[L]),bt=Object(r.useMemo)((function(){return w===f.a.RUNE_ASYM?[d.LiquidityTypeOption.SYMMETRICAL,d.LiquidityTypeOption.ASSET]:w===f.a.ASSET_ASYM?[d.LiquidityTypeOption.SYMMETRICAL,d.LiquidityTypeOption.RUNE]:[]}),[w]);return k?tt?Object(E.jsxs)(d.PanelView,{meta:ft,poolAsset:L,type:"withdraw",children:[Object(E.jsxs)(O,{children:[Object(E.jsxs)(x,{children:[Object(E.jsx)(S,{children:"WITHDRAW: "}),Object(E.jsx)(d.LiquidityType,{poolAsset:L,selected:Y,onSelect:q,disable:bt})]}),Object(E.jsxs)(x,{children:[Object(E.jsx)(S,{children:"FROM: "}),Object(E.jsx)(d.PoolShareTypeSelect,{poolAsset:L,selected:w,onSelect:rt,shareTypes:c})]})]}),Object(E.jsx)(d.MemberPoolData,{data:tt,shareType:w,pool:n}),Object(E.jsx)(T,{children:Object(E.jsx)(g,{children:Object(E.jsx)(d.Slider,{value:V,onChange:ct,withLabel:!0})})}),Object(E.jsxs)(C,{children:[Y!==d.LiquidityTypeOption.ASSET&&Object(E.jsx)(d.Information,{title:"RUNE",description:"".concat(it.toSignificant(6)," RUNE (").concat(at.toCurrencyFormat(2),")"),tooltip:"You are withdrawing RUNE from the liquidity"}),Y!==d.LiquidityTypeOption.RUNE&&Object(E.jsx)(d.Information,{title:L.ticker,description:"".concat(ot.toSignificant(6)," ").concat(L.ticker," (").concat(st.toCurrencyFormat(2),")"),tooltip:"You are withdrawing ASSET from the liquidity"}),Object(E.jsx)(d.Information,{title:"Transaction Fee",description:Z,tooltip:A.e})]}),k&&Object(E.jsx)(v,{children:Object(E.jsx)(d.FancyButton,{onClick:lt,children:"Withdraw"})}),Object(E.jsx)(d.ConfirmModal,{visible:$,onOk:ut,onCancel:dt,inputAssets:[X],children:pt})]}):Object(E.jsx)(d.PanelView,{meta:ft,poolAsset:L,type:"withdraw",children:Object(E.jsxs)(d.Label,{children:["You don't have any ",L.ticker," liquidity."]})}):Object(E.jsx)(d.PanelView,{meta:ft,poolAsset:L,type:"withdraw",children:Object(E.jsx)(d.Label,{children:"Please connect wallet."})})},k=function(){var t=Object(c.h)().asset,e=Object(r.useState)(),n=Object(s.a)(e,2),i=n[0],u=n[1],b=Object(r.useState)(),m=Object(s.a)(b,2),y=m[0],h=m[1],A=Object(p.a)(),j=A.pools,w=A.poolLoading,O=A.loadMemberDetailsByChain,x=A.chainMemberDetails;Object(r.useEffect)((function(){y&&O(y.asset.chain)}),[O,y]);var S=Object(r.useMemo)((function(){var t,e;return y&&null!==(t=null===x||void 0===x||null===(e=x[y.asset.chain])||void 0===e?void 0:e[y.asset.toString()])&&void 0!==t?t:null}),[x,y]);if(Object(r.useEffect)((function(){if(!w&&j.length&&i){var t=l.Pool.byAsset(i,j);t&&h(t)}}),[j,w,i]),Object(r.useEffect)((function(){(function(){var e=Object(a.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!(n=l.Asset.fromAssetString(t))){e.next=9;break}if(!n.isRUNE()){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.setDecimal();case 8:u(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),y&&j.length&&S&&Object.keys(S).length){var T=[];return S.sym&&T.push(f.a.SYM),S.runeAsym&&T.push(f.a.RUNE_ASYM),S.assetAsym&&T.push(f.a.ASSET_ASYM),Object(E.jsx)(N,{pool:y,shareTypes:T,pools:j,poolMemberData:S})}return Object(E.jsx)(d.Panel,{children:Object(E.jsx)(d.Label,{children:"You don't have LP to withdraw"})})};e.default=k}}]);
//# sourceMappingURL=8.df7e92ce.chunk.js.map