(this["webpackJsonpthorswap-app"]=this["webpackJsonpthorswap-app"]||[]).push([[4],{1655:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i={average:.67,fast:1,fastest:1.5},o=function(t){var e,n=t.inboundData,i=t.chain,o=n.find((function(t){return t.chain===i}));return Number(null!==(e=null===o||void 0===o?void 0:o.gas_rate)&&void 0!==e?e:0)},s=function(t){var e=t.inboundData,n=t.chain,s=t.feeOptionType;return o({inboundData:e,chain:n})*i[s]}},1656:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var i=n(0),o=n(21),s=n(148),a=n(99),r=n(1655),u=function(t){var e=t.inputAsset,n=t.outputAsset,u=Object(s.a)().feeOptionType,c=Object(a.a)(),d=c.inboundData,l=c.pools,m=Object(i.useMemo)((function(){var t=Object(r.b)({inboundData:d,chain:e.chain,feeOptionType:u});return o.NetworkFee.getNetworkFeeByAsset({asset:e,gasRate:t,direction:"inbound"})}),[e,d,u]),p=Object(i.useMemo)((function(){if(!n)return null;var t=Object(r.a)({inboundData:d,chain:n.chain});return o.NetworkFee.getNetworkFeeByAsset({asset:n,gasRate:t,direction:"outbound"})}),[n,d]),b=Object(i.useMemo)((function(){if(!p)return m;var t=new o.AssetAmount(e,o.Amount.fromAssetAmount(p.totalPriceIn(e,l).price,e.decimal));return m.asset.eq(e)?m.add(t):new o.AssetAmount(e,o.Amount.fromAssetAmount(m.totalPriceIn(e,l).price,e.decimal)).add(t)}),[e,m,p,l]),f=Object(i.useMemo)((function(){return b.totalPriceIn(o.Asset.USD(),l)}),[b,l]);return{totalFee:b,inboundFee:m,outboundFee:p,totalFeeInUSD:f}},c=function(t,e,n){var i=null===t||void 0===t?void 0:t.totalPriceIn(o.Asset.USD(),n),s=null===e||void 0===e?void 0:e.totalPriceIn(o.Asset.USD(),n);if(null===t&&s)return s.toCurrencyFormat();if(null===e&&i)return i.toCurrencyFormat();if(i&&s){var a=i.raw().plus(s.raw());return o.Amount.fromAssetAmount(a,8).toFixed(2)}return o.Amount.fromAssetAmount(0,8).toFixed()}},1657:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i,o=n(0),s=new Uint8Array(16);function a(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(t){return"string"===typeof t&&r.test(t)},c=[],d=0;d<256;++d)c.push((d+256).toString(16).substr(1));var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n};var m=function(t,e,n){var i=(t=t||{}).random||(t.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return l(i)},p=n(99),b=n(35),f=function(){var t=Object(p.a)(),e=t.addNewTxTracker,n=t.updateTxTracker,i=t.clearTxTrackers,s=t.processSubmittedTx;return{submitTransaction:Object(o.useCallback)((function(t){var n=t.type,i=t.submitTx,o=m();return e({uuid:o,type:n,status:b.b.Submitting,submitTx:i,action:null,refunded:null}),o}),[e]),pollTransaction:Object(o.useCallback)((function(t){var e=t.uuid,i=t.submitTx,o=t.type;n({uuid:e,txTracker:{status:b.b.Pending,submitTx:i}}),s({submitTx:i,type:o})}),[n,s]),clearTxTrackers:i,setTxFailed:Object(o.useCallback)((function(t){n({uuid:t,txTracker:{status:b.b.Failed}})}),[n])}}},1658:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(0),o=n(112),s=n(21),a=n(128),r=n(1655),u=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.app})).feeOptionType,n=Object(o.c)((function(t){return t.wallet})).wallet,u=Object(o.c)((function(t){return t.midgard})).inboundData,c=Object(i.useCallback)((function(e){t(a.getWalletByChain(e))}),[t]),d=Object(i.useCallback)((function(){t(a.loadAllWallets())}),[t]);return{getMaxBalance:Object(i.useCallback)((function(t){if(!(null===n||void 0===n?void 0:n[t.chain]))return s.Amount.fromAssetAmount(Math.pow(10,8),8);var i=Object(r.b)({inboundData:u,chain:t.chain,feeOptionType:e}),o=s.NetworkFee.getNetworkFeeByAsset({asset:t,gasRate:i,direction:"inbound"}),a=Object(s.getAssetBalance)(t,n).amount,c=t.isGasAsset()?a.sub(o.mul(1.5).amount):a;return c.gt(0)?c:s.Amount.fromAssetAmount(0,t.decimal)}),[n,e,u]),reloadAllBalance:d,reloadBalanceByChain:c,wallet:n}}},1663:function(t,e,n){"use strict";n.r(e);var i,o=n(2),s=n.n(o),a=n(16),r=n(26),u=n(0),c=n(497),d=n(287),l=n(21),m=n(603),p=n(35),b=n(157),f=n(112),j=n(11),A=n(41),O=n(1657),g=n(58),x=n(601),y=n(898),h=n(1658),v=n(305),w=n(1656),C=n(9),T=n(5),k=n(6),S=n(44),P=T.d.div.withConfig({displayName:"Addstyle__ToolContainer",componentId:"sit5up-0"})(["display:flex;height:60px;"]),M=T.d.div.withConfig({displayName:"Addstyle__ContentPanel",componentId:"sit5up-1"})(["display:flex;flex-direction:column;width:100%;padding:16px 8px 8px 8px;",""],S.a.sm(i||(i=Object(C.a)(["\n    padding: 16px 12px 4px 12px;\n  "])))),N=T.d.div.withConfig({displayName:"Addstyle__SliderWrapper",componentId:"sit5up-2"})(["width:260px;"]),F=T.d.div.withConfig({displayName:"Addstyle__SwitchPair",componentId:"sit5up-3"})(["display:flex;justify-content:center;align-items:center;flex:1;svg{width:24px;height:24px;color:",";transform:rotate(90deg);}"],Object(k.palette)("primary",0)),I=T.d.div.withConfig({displayName:"Addstyle__ConfirmButtonContainer",componentId:"sit5up-4"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:0 2%;margin-top:14px;button{flex:1;}"]),D=T.d.div.withConfig({displayName:"Addstyle__ConfirmModalContent",componentId:"sit5up-5"})(["display:flex;flex-direction:column;padding:10px;"]),_=T.d.div.withConfig({displayName:"Addstyle__DetailContent",componentId:"sit5up-6"})(["display:flex;flex-direction:column;width:100%;padding:8px;margin-top:14px;border:1px solid ",";"],Object(k.palette)("gray",0)),R=(Object(T.d)(d.FancyButton).withConfig({displayName:"Addstyle__ApproveBtn",componentId:"sit5up-7"})(["margin-right:8px;"]),n(1)),L=function(t){var e=t.pool,n=t.pools,i=t.assetObj,o=t.data,m=Object(h.a)(),b=m.wallet,f=m.getMaxBalance,j=Object(O.a)(),A=j.submitTransaction,C=j.pollTransaction,T=j.setTxFailed,k=Object(v.a)().isFundsCapReached,S=Object(w.b)({inputAsset:e.asset}).inboundFee,L=Object(w.b)({inputAsset:l.Asset.RUNE()}).inboundFee,B=Object(u.useMemo)((function(){return Number(o.pending_asset)>0}),[o]),E=Object(u.useMemo)((function(){return Number(o.pending_asset)>0?l.Amount.fromMidgard(o.pending_asset):l.Amount.fromMidgard(o.pending_rune)}),[o]),U=Object(u.useState)(B?E:l.Amount.fromAssetAmount(0,8)),q=Object(r.a)(U,2),W=q[0],V=q[1],z=Object(u.useState)(B?l.Amount.fromAssetAmount(0,8):E),G=Object(r.a)(z,2),J=G[0],Y=G[1],H=Object(u.useState)(0),$=Object(r.a)(H,2),K=$[0],Q=$[1],X=Object(u.useState)(!1),Z=Object(r.a)(X,2),tt=Z[0],et=Z[1],nt=Object(u.useMemo)((function(){return B?"".concat(S.toCurrencyFormat()," (").concat(S.totalPriceIn(l.Asset.USD(),n).toCurrencyFormat(2),")"):"".concat(L.toCurrencyFormat()," (").concat(L.totalPriceIn(l.Asset.USD(),n).toCurrencyFormat(2),")")}),[B,S,L,n]),it=Object(u.useMemo)((function(){return l.Amount.fromMidgard(o.units)}),[o]),ot=Object(u.useMemo)((function(){return new l.Liquidity(e,it)}),[e,it]),st=Object(u.useMemo)((function(){return ot.getLiquiditySlip(J,W).toFixed(2)}),[ot,W,J]),at=Object(u.useMemo)((function(){return ot.getPoolShareEst(J,W).toFixed(3)}),[ot,W,J]),rt=Object(u.useMemo)((function(){return new l.Price({baseAsset:i,pools:n,priceAmount:W})}),[i,W,n]),ut=Object(u.useMemo)((function(){return new l.Price({baseAsset:l.Asset.RUNE(),pools:n,priceAmount:J})}),[J,n]),ct=Object(u.useMemo)((function(){return b?Object(l.getAssetBalance)(i,b).amount:l.Amount.fromAssetAmount(Math.pow(10,3),8)}),[i,b]),dt=Object(u.useMemo)((function(){return B?E:f(i)}),[i,f,B,E]),lt=Object(u.useMemo)((function(){return b?Object(l.getAssetBalance)(l.Asset.RUNE(),b).amount:l.Amount.fromAssetAmount(Math.pow(10,3),8)}),[b]),mt=function(t){var e=t.assetAmount,n=t.runeAmount,i=t.pool,o=n.mul(i.runePriceInAsset);if(o.gt(e)){var s=e,a=s.mul(i.assetPriceInRune);return{maxSymAssetAmount:s,maxSymRuneAmount:a}}return{maxSymAssetAmount:o,maxSymRuneAmount:n}}({runeAmount:Object(u.useMemo)((function(){return B?f(l.Asset.RUNE()):E}),[f,B,E]),assetAmount:dt,pool:e}),pt=mt.maxSymAssetAmount,bt=mt.maxSymRuneAmount,ft=Object(u.useCallback)((function(t){Q(t),B?Y(bt.mul(t).div(100)):V(pt.mul(t).div(100))}),[bt,pt,B]),jt=Object(u.useCallback)((function(t){if(B){var e=bt;t.gt(e)?Y(e):(Y(t),Q(t.div(e).mul(100).assetAmount.toNumber()))}else{var n=pt;t.gt(n)?V(n):(V(t),Q(t.div(n).mul(100).assetAmount.toNumber()))}}),[B,bt,pt]),At=Object(u.useMemo)((function(){return B?l.Asset.RUNE():i}),[B,i]),Ot=Object(u.useCallback)(Object(a.a)(s.a.mark((function t(){var n,o,a,r,u,c,m,f,j,O,x,y;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(et(!1),!b){t.next=43;break}if(!B){t.next=24;break}return n=new l.AssetAmount(l.Asset.RUNE(),J),void 0,(o=[]).push({asset:l.Asset.RUNE().toString(),amount:J.toSignificant(6)}),a=A({type:p.c.AddLiquidity,submitTx:{inAssets:o,outAssets:[],poolAsset:i.ticker}}),t.prev=8,t.next=11,g.a.addLiquidity({pool:e,runeAmount:n,assetAmount:undefined},"sym_rune");case 11:r=t.sent,u=null===r||void 0===r?void 0:r.runeTx,c=null===r||void 0===r?void 0:r.assetTx,(u||c)&&C({type:p.c.AddLiquidity,uuid:a,submitTx:{inAssets:o,outAssets:[],txID:u||c,addTx:{runeTxID:u,assetTxID:c},poolAsset:i.ticker}}),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(8),T(a),Object(d.Notification)({type:"error",message:"Submit Transaction Failed.",duration:20}),console.log(t.t0);case 22:t.next=43;break;case 24:return void 0,m=new l.AssetAmount(i,W),(f=[]).push({asset:i.toString(),amount:W.toSignificant(6)}),j=A({type:p.c.AddLiquidity,submitTx:{inAssets:f,outAssets:[],poolAsset:i.ticker}}),t.prev=29,t.next=32,g.a.addLiquidity({pool:e,runeAmount:undefined,assetAmount:m},"sym_asset");case 32:O=t.sent,x=null===O||void 0===O?void 0:O.runeTx,y=null===O||void 0===O?void 0:O.assetTx,(x||y)&&C({type:p.c.AddLiquidity,uuid:j,submitTx:{inAssets:f,outAssets:[],txID:x||y,addTx:{runeTxID:x,assetTxID:y},poolAsset:i.ticker}}),t.next=43;break;case 38:t.prev=38,t.t1=t.catch(29),T(j),Object(d.Notification)({type:"error",message:"Submit Transaction Failed.",duration:20}),console.log(t.t1);case 43:case"end":return t.stop()}}),t,null,[[8,17],[29,38]])}))),[B,b,e,i,J,W,A,C,T]),gt=Object(u.useCallback)((function(){et(!1)}),[]),xt=Object(u.useCallback)((function(){b?k?Object(d.Notification)({type:"info",message:"Funds Cap Reached",description:"You cannot add due to 90% Funds Cap has been reached. Please try again later."}):et(!0):Object(d.Notification)({type:"info",message:"Wallet Not Found",description:"Please connect wallet"})}),[b,k]),yt=Object(u.useMemo)((function(){var t=B?"".concat(J.toSignificant(6)," RUNE"):"".concat(W.toSignificant(6)," ").concat(i.ticker),e=B?Object(l.getEstimatedTxTime)({chain:c.b,amount:J}):Object(l.getEstimatedTxTime)({chain:i.chain,amount:W});return Object(R.jsxs)(D,{children:[Object(R.jsx)(d.Information,{title:"Add",description:t}),Object(R.jsx)("br",{}),Object(R.jsx)(d.Information,{title:"Slip",description:st,tooltip:x.d}),Object(R.jsx)(d.Information,{title:"Pool Share Estimated",description:at,tooltip:x.a}),Object(R.jsx)(d.Information,{title:"Transaction Fee",description:nt,tooltip:x.e}),Object(R.jsx)(d.Information,{title:"Estimated Time",description:e,tooltip:x.b})]})}),[J,st,at,nt,B,i,W]),ht=Object(u.useMemo)((function(){return l.AssetAmount.getMinAmountByChain("THOR").amount}),[]),vt=Object(u.useMemo)((function(){return i.isGasAsset()?l.AssetAmount.getMinAmountByChain(i.chain):l.Amount.fromAssetAmount(0,8)}),[i]),wt=Object(u.useMemo)((function(){return B||W.gt(vt)?B&&!J.gt(ht)?{valid:!1,msg:"Insufficient Amount"}:{valid:!0}:{valid:!1,msg:"Insufficient Amount"}}),[B,J,W,ht,vt]);return Object(R.jsxs)(M,{children:[Object(R.jsx)(d.AssetInputCard,{title:B?"Pending":"Add To Complete",asset:i,amount:W,balance:ct,usdPrice:rt,inputProps:{disabled:B},wallet:b||void 0,selectDisabled:!0}),Object(R.jsxs)(P,{children:[Object(R.jsx)(N,{children:Object(R.jsx)(d.Slider,{value:K,onChange:ft,withLabel:!0})}),Object(R.jsx)(F,{children:Object(R.jsx)(y.a,{})})]}),Object(R.jsx)(d.AssetInputCard,{title:B?"Add To Complete":"Pending",asset:l.Asset.RUNE(),amount:J,usdPrice:ut,selectDisabled:!0,balance:lt,onChange:jt,wallet:b||void 0,inputProps:{disabled:!B}}),Object(R.jsxs)(_,{children:[Object(R.jsx)(d.Information,{title:"Slip",description:st,tooltip:x.d}),Object(R.jsx)(d.Information,{title:"Pool Share Estimated",description:at,tooltip:x.a}),Object(R.jsx)(d.Information,{title:"Transaction Fee",description:nt,tooltip:x.e})]}),Object(R.jsx)(I,{children:Object(R.jsx)(d.FancyButton,{onClick:xt,error:!wt.valid,children:wt.valid?"Add Liquidity":wt.msg})}),Object(R.jsx)(d.ConfirmModal,{visible:tt,onOk:Ot,onCancel:gt,inputAssets:[At],children:yt})]})},B=T.d.div.withConfig({displayName:"PendingDepositstyle__ToolContainer",componentId:"sc-1f6g34y-0"})(["display:flex;justify-content:space-between;align-items:center;width:100%;padding:4px 10px;a{width:100%;}button{width:100%;}"]),E=T.d.div.withConfig({displayName:"PendingDepositstyle__ConfirmModalContent",componentId:"sc-1f6g34y-1"})(["display:flex;flex-direction:column;padding:10px;"]),U=function(){var t=Object(b.a)().wallet,e=Object(O.a)(),n=e.submitTransaction,i=e.pollTransaction,o=e.setTxFailed,y=Object(u.useState)(),h=Object(r.a)(y,2),v=h[0],w=h[1],C=Object(u.useState)(!1),T=Object(r.a)(C,2),k=T[0],S=T[1],P=function(){var t=Object(f.b)(),e=Object(f.c)((function(t){return t.wallet})).wallet,n=Object(f.c)((function(t){return t.midgard})),i=n.pools,o=n.pendingLP,s=n.pendingLPLoading,a=Object(u.useCallback)((function(){if(e){var n=Object(l.getWalletAddressByChain)(e,j.l);n&&i.forEach((function(e){t(Object(A.getLiquidityProviderData)({address:n,asset:e.asset.toString()}))}))}}),[t,e,i]);Object(u.useEffect)((function(){return a()}),[a]);var r=Object(u.useMemo)((function(){return Object.keys(o).length>0}),[o]);return{getPendingDeposit:a,pools:i,pendingLP:o,pendingLPLoading:s,hasPendingDeposit:r}}(),M=P.pools,N=P.pendingLP,F=P.pendingLPLoading,I=P.hasPendingDeposit,D=P.getPendingDeposit,_=Object(u.useMemo)((function(){if(!v)return null;var t=v.data;return l.Asset.fromAssetString(t.asset)}),[v]),U=Object(u.useMemo)((function(){return _?l.Pool.byAsset(_,M):null}),[_,M]),q=Object(u.useCallback)((function(t){w({type:"add",data:t})}),[]),W=Object(u.useCallback)((function(){t?S(!0):Object(d.Notification)({type:"info",message:"Wallet Not Found",description:"Please connect wallet"})}),[t]),V=Object(u.useCallback)((function(t){w({type:"withdraw",data:t}),W()}),[W]),z=Object(u.useMemo)((function(){return t?I?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(B,{children:Object(R.jsx)(d.FancyButton,{size:"small",onClick:D,loading:F,children:"Check Pending Deposit"})}),Object.keys(N).map((function(t){var e=l.Asset.fromAssetString(t),n=N[t];return e?Object(R.jsx)(m.a,{poolAsset:e,data:n,onComplete:function(){return q(n)},onWithdraw:function(){return V(n)}},t):null}))]}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(B,{children:Object(R.jsx)(d.FancyButton,{size:"small",onClick:D,loading:F,children:"Check Pending Deposit"})}),Object(R.jsx)("br",{}),Object(R.jsx)(d.Label,{children:"You don't have any pending deposit."}),Object(R.jsx)(d.Label,{children:"It takes some time for the pending deposit to show up."})]}):null}),[D,q,V,N,F,I,t]),G=Object(u.useMemo)((function(){if(!v||!t||!_||!U)return null;var e=v.data;return Object(R.jsx)(L,{pools:M,pool:U,assetObj:_,data:e})}),[v,M,U,_,t]),J=Object(u.useMemo)((function(){if(!v)return null;var t=v.data;return Number(t.pending_asset)>0?_:l.Asset.RUNE()}),[v,_]),Y=Object(u.useMemo)((function(){if(!v)return null;var t=v.data;return Number(t.pending_asset)>0?l.Amount.fromMidgard(v.data.pending_asset):l.Amount.fromMidgard(v.data.pending_rune)}),[v]),H=Object(u.useCallback)(Object(a.a)(s.a.mark((function e(){var a,r,u,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_&&Y&&U){e.next=2;break}return e.abrupt("return",null);case 2:if(S(!1),!t||!J){e.next=20;break}return a=_.toString(),r="",e.prev=6,u=[{asset:J.toString(),amount:Y.toSignificant(6)}],r=n({type:p.c.Withdraw,submitTx:{inAssets:[],outAssets:u,poolAsset:a}}),e.next=11,g.a.withdraw({pool:U,percent:new l.Percent(100),from:"sym",to:"sym"});case 11:m=e.sent,i({type:p.c.Withdraw,uuid:r,submitTx:{inAssets:[],outAssets:u,poolAsset:a,txID:m,withdrawChain:c.b}}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0),o(r),Object(d.Notification)({type:"error",message:"Submit Transaction Failed.",duration:20});case 20:case"end":return e.stop()}}),e,null,[[6,15]])}))),[t,U,_,J,Y,n,i,o]),$=Object(u.useCallback)((function(){S(!1)}),[]),K=Object(u.useMemo)((function(){return Y&&J?Object(R.jsxs)(E,{children:[Object(R.jsx)(d.Information,{title:"Withdraw",description:"Pending ".concat(Y.toSignificant(6)," ").concat(J.ticker.toUpperCase())}),Object(R.jsx)(d.Information,{title:"Transaction Fee",description:"0.02 RUNE",tooltip:x.e})]}):null}),[J,Y]);return Object(R.jsxs)(d.PanelView,{meta:"Pending Deposit",poolAsset:l.Asset.BTC(),type:"pending",children:[!t&&Object(R.jsx)(d.Label,{children:"Please connect wallet."}),z,"add"===(null===v||void 0===v?void 0:v.type)&&G,Object(R.jsx)(d.ConfirmModal,{visible:k,onOk:H,onCancel:$,inputAssets:[l.Asset.RUNE()],children:K})]})};e.default=U}}]);
//# sourceMappingURL=4.64bef4fc.chunk.js.map